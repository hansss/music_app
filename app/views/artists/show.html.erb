<p class="notice"><%= notice %></p>
  <div class = "content">
    <div class = "header_cover">
      <% check_for_cover_image(@artist) %>
        <div class = "cover_image" style="background-image:url(<%=@artist.get_cover_image%>)">
        </div>
      </div>
    </div>


    <div class = "left_sidebar"
      <div class = "left_sidebar_scrollable">
          <div class = "profile_image">
            <% check_for_profile_image(@artist) %>
            <%= image_tag @artist.get_profile_image %>
          </div>
          <div class ="name">
            <b>Name:</b> <%= @artist.name %>
          </div>

          <div class = "city">
            <b>City:</b> <%= @artist.city %>
          </div>

          <% if can? :edit, @artist %>
          <div class="edit_profile_page">
            <%= link_to 'Edit', edit_artist_path(@artist) %> 
          </div>
          <% end %>
        </div>
    </div>

  <div class = "songs_group">
    <div class="song_title_on_artist_page">
      <%=@artist.name.possessive.upcase%> SONGS
    </div>
    <% if can? :manage, @artist %>
      <%= link_to "Add a new song", new_song_path %>
    <% end %>
    

    <% @artist.songs.order('updated_at DESC').each do |song| %>
      <div class = "song">

        <div class = "song_name"><%= song.name %></div></br>
        <%= image_tag song.get_song_image %>

        <audio controls>
          <source src=<%= song.song_audio.url %> type="audio/ogg">
          <source src=<%= song.song_audio.url %> type="audio/mpeg">
          Your browser does not support the audio element.
        </audio></br>
        <%= song.updated_at.to_date.to_formatted_s(:long_ordinal) %></br>

        <% if can? :manage, song %>
        <%= link_to "Edit Song", edit_song_path(song) %>
        <%= link_to "Delete Song", song_path(song), method: "delete" %></br>
        <% end %>

        <%= link_to "Add a comment", new_song_comment_path(song) %>

        <% song.comments.each do |comment| %>
            <li class="comments">    
              <% if comment.artist != nil %>
                <%=image_tag comment.artist.profile_image_url(:comment_thumb) %> 
              <% end %>


              <%=verify_if_comment_has_a_registered_author(comment)%>: 
              <%= comment.content %>
              <%= comment.updated_at.to_formatted_s(:long) %>

              <% if current_user != nil %>
                <% if can? :manage, comment %>
                  <%= link_to 'Edit', edit_song_comment_path(song,comment) %>
                <% end %>
                <% if can? :destroy, comment %>
                  <%= link_to 'Delete', song_comment_path(song, comment), method: :delete %>
                <%end%>
              <%end%>
            </li>
        <% end %>
    </div>
    <% end %>
  </div>
</div>


